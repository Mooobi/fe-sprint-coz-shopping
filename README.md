# fe-sprint-coz-shopping
코드스테이츠 SEB_FE_44 과정에서 제작한 솔로프로젝트입니다.
- 링크 : https://mooobi.github.io/fe-sprint-coz-shopping/products/list 

(배포된 버전은 fetch 요청으로 데이터를 받아오지 않고, Data 파일을 포함하고 있습니다.
gh pages의 특성상, 기본 url은 https로만 만들어지는데, 기존 코드에서 네트워크 요청은 http를 이용하기 합니다. 웹브라우저는 보안 상의 문제로 이러한 혼합 콘텐츠(Mixed Content)를 허용하지 않습니다. 새로운 도메인을 등록하는 방법, 네트워크 요청을 하지 않고 더미 데미터를 사용하는 방법 중에서 고민을 하다가, 요구사항에서 네트워크 요청은 최초 1회만 받는걸로 명시되어 있어, 더미 데이터를 사용하는 방식을 채택하였습니다.

## 프로젝트 설명
해당 프로젝트는 API를 통해 데이터를 받아와 제품들을 보여주는 간단한 쇼핑몰 웹 애플리케이션입니다.

## 주요 기능
- 북마크 기능
  - 해당 과제는 서버를 별도로 구현하지 않아 localStorage에 북마크 된 리스트를 저장하여 구현하였습니다.
- 모달 기능
  - 별도의 라이브러리를 사용하지 않고 모달 컴포넌트를 구현하였습니다.
- 무한스크롤 기능
  - 해당 과제의 요구사항에 따라 전체 데이터 목록을 한번에 받아온 후, 스크롤바에 접근하여 스크롤이 제일 아래에 닿을 때마다 useState를 통해 렌더링할 목록 수를 늘려주는 방식으로 구현하였습니다.
- 알림토스트 기능
  - 직접 구현하려고 시도하였으나, 연속적인 클릭에 반응하는 로직을 구현하지 못하여 tostify 라이브러리를 사용하였습니다.
- 카테고리 필터링 기능
  - filter 컴포넌트를 구현하여 카테고리 목록 클릭 시 데이터의 타입에 따라 필터링하여 렌더링하는 방식으로 구현하였습니다.

## 사용된 기술
- HTML, CSS(CSS module), JavaScript
- React.js
- React-Route-DOM
- Tosify

## 개발 과정

- 코드스테이츠 측에서 피그마로 디자인과 요구사항 명세서를 제안하여 그에 따라 프로젝트를 시작하였습니다.
- 애자일 방법론 중 하나인 스크럼 방식에 따라 header, footer, productlist, productlist 페이지, bookmarklist 페이지, main 페이지 구현하는 티켓을 생성하였습니다.
- header, footer, productlist(하나의 카드 컴포넌트)를 구현하기까지는 특별한 어려움 없이 진행되었지만, 리덕스를 사용하지 않은 관계로(왜 사용하지 않았냐 하시면 props driling이 심하지 않은 이유도 있지만, 아직 리덕스의 사용이 익숙치 않아 기간 내에 프로젝트를 완료하지 못할 가능성이 높은 게 주된 이유였습니다.) App.js에 수많은 로직이 작성되었습니다. 이 시점에서 1차 코드리뷰를 받아 App.js에 있는 로직들을 main 페이지에서 관리하려 시도해 보았으나, 실패하였습니다. 기존에는 App의 Route를 통해 props를 내려주었지만 mainpage로 로직을 옮기면 라우팅은 App에서, props 내려주기는 mainpage에서 해야하는 상황이 발생하는데, 나머지 페이지가 mainpage의 자식 컴포넌트가 아니기 때문에 어떤 식으로 props를 내려주어야 할지 해결 방법을 찾지 못하였습니다.
- main 페이지 및 북마크 페이지를 구현하였지만 아래와 같은 문제점이 발생하였습니다.
  - 북마크리스트 페이지에서 필터 로직이 제대로 작동하지 않음 
    - 북마크필터 컴포넌트 및 북마크리스트 컴포넌트 수정 필요
  - 프로덕트리스트 페이지에서 렌더링이 되지 않은 리스트는 메인페이지 북마크 리스트에도 표시되지 않음
    - 무한스크롤로 추가적인 렌더링이 될 때 해당 데이터가 북마크 상태 배열에서 삭제되는 듯함
    - 프로덕트 리스트를 렌더링 하는 과정에서 북마크 상태를 로컬스토리지에서 가져와야함
  - 페이지 이동 시 스크롤이 제일 위로 초기화되지 않음
- 북마크 필터 컴포넌트를 별도로 나누어 주었는데, 재사용 가능한 기존의 ProductFilter를 Bookmarklist도 사용하고, 필터링하는 아이템을 localStorage에 저장된 아이템으로 변경하니 첫번째 문제점이 해결되었습니다.
  - 페이지 이동 시 스크롤이 제일 위로 초기화되지 않음
- localStorage에 아이템을 추가,삭제하는 로직을 useEffect를 사용하여 복잡한 로직을 구현하여서 북마크 버튼의 온클릭 핸들러에 해당 로직을 추가하고 기존의 useEffect를 삭제하니 두번째, 세번째 문제점이 해결되었습니다.
- App.js의 state와 useEffect 및 핸들러들을 MainPage.js로 옮기려고 시도하였으나, main page에서 product list page로 props를 내려주려면 Link의 state로 내려줘야 하는 상황이 발생하였습니다. 이에 따라 Link의 state로 props를 내려주려 시도했으나 자식 컴포넌트가 props를 인식하지 못하는 에러가 발생했고, 따라서 다시 App.js에서 로직을 관리토록 하였습니다.
- 기능 구현 완료 후, 쓰이지 않는 변수 제거, 중복되는 코드 수정을 통한 가독성 향상을 위해 전반적인 코드 수정을 하였습니다.
  - 코드리뷰에 따른 변경사항 반영
    - BookmarkFilter를 삭제하였습니다.
    - ProductList 컴포넌트 내의 중복되는 코드를 정리하였습니다.
    - 전체적인 코드는 짧아졌으나, 가독성이 떨어집니다. 어떤 코드가 더 좋은 코드인지 궁금합니다.
    - 문자열로 들어오는 데이터를 TS의 enum과 비슷하게 저장하여 변수화하였습니다.
    - mainpage에서 데이터를 받아오게 시도하였으나 실패하였습니다.
    - 기존에는 App의 Route를 통해 props를 내려주었지만 mainpage로 로직을 옮기면 라우팅은 App에서, props 내려주기는 mainpage에서 해야하는 상황이 발생하는데, 나머지 페이지가 mainpage의 자식 컴포넌트가 아니기 때문에 어떤 식으로 props를 내려주어야 할지 해결 방법을 찾지 못하였습니다.
    - 자식 컴포넌트에서 props를 구조분해 할당하여 사용하였습니다.
  - 추가적인 변경사항
    - 각 페이지에서 불러오던 Modal 컴포넌트를 App 컴포넌트의 자식으로 옮겨서 중복되는 코드를 삭제하였습니다.
    - mainpage에서 중복되는 코드를 하나로 변수화하여 코드 수를 줄였습니다.
    - 이 외 Modal 컴포넌트 등에서 조건부랜더링 시 사용하던 중복되는 코드들을 대거 줄였습니다.

## 설치 및 실행 방법
1. 저장소를 클론합니다.
2. 터미널에서 npm install 명령어를 입력하여 dependency을 설치합니다.
3. npm start 명령어를 입력하여 애플리케이션을 실행합니다.

## 기여
Pull Request는 언제든지 환영합니다. 다만, 새로운 기능 추가나 버그 수정을 하기 전에 이슈를 먼저 등록해주시기 바랍니다.

## 작성자
박무생 (antod123@naver.com)
